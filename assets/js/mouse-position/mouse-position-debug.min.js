(function(a){function b(b){b.type="mouse-position",b.mousePosition=c.run(b),a(b.currentTarget).trigger(b)}var c;jQuery.event.special["mouse-position"]={setup:function(e){c=new d,a(this).bind("mousemove",e,b)},teardown:function(){a(this).unbind("mousemove")}};class d{constructor(){this.axisQuadrants=["II-I","II-III","III-IV","I-IV","X"]}run(a){return this.event=a,this.setSettings(a),this.setOffsets(),this.setQuadrant(),this.setTriangleData(),this.drawDebug(),this.getData()}setSettings(a){this.settings={...{debug:0},...(a.data||{})}}setOffsets(){var b=a(this.event.currentTarget).width(),c=a(this.event.currentTarget).height(),d=Math.ceil(a(this.event.currentTarget).offset().left),e=Math.ceil(a(this.event.currentTarget).offset().top);this.xOffset=this.event.pageX-d-b/2,this.yOffset=-1*(this.event.pageY-e-c/2),this.yOffset=-0==this.yOffset?0:this.yOffset}setQuadrant(){this.quadrant=0<this.xOffset&&0<this.yOffset?"I":0>this.xOffset&&0<this.yOffset?"II":0>this.xOffset&&0>this.yOffset?"III":0<this.xOffset&&0>this.yOffset?"IV":0==this.xOffset&&0<this.yOffset?"II-I":0==this.xOffset&&0>this.yOffset?"III-IV":0<this.xOffset&&0==this.yOffset?"I-IV":0>this.xOffset&&0==this.yOffset?"II-III":"X"}isLine(){return this.axisQuadrants.includes(this.quadrant)}getHypotenuse(a,b){return Math.sqrt(Math.pow(a,2)+Math.pow(b,2))}getAlphaAngle(a,b){return 180*Math.asin(a/b)/Math.PI}setTriangleData(){var a=0<this.xOffset?this.xOffset:-this.xOffset,b=0<this.yOffset?this.yOffset:-this.yOffset,c=this.isLine(),d=c?a||b:this.getHypotenuse(a,b),e=c?0:this.getAlphaAngle(a,d),f=c?0:90-e;this.triangleData={legA:a,legB:b,hypotenuse:d,alphaAngle:e,betaAngle:f}}getTotalDegrees(){switch(this.quadrant){case"I":case"II-I":return this.triangleData.alphaAngle;case"II":case"II-III":return 270+this.triangleData.betaAngle;case"III":case"III-IV":return 180+this.triangleData.alphaAngle;case"IV":case"I-IV":return 90+this.triangleData.betaAngle;default:return-1;}}drawDebug(){if(2!=this.settings.debug)return null;this.prepareDebugElements();var b=this.triangleData.legA,c=this.triangleData.alphaAngle,d=this.triangleData.legB,e=this.triangleData.betaAngle,f=this.triangleData.hypotenuse,g=this.getTotalDegrees();a(this.event.currentTarget).find(".center").attr("class","").addClass("center "+this.quadrant),a(this.event.currentTarget).find(".leg-a").width(b),a(this.event.currentTarget).find(".leg-b").height(d),a(this.event.currentTarget).find(".hypotenuse").height(f).css("transform",`rotate(${-1==g?0:g}deg)`);var h="<tr><td>a \u2194</td><td class=\"l-a\"td>%l-a$</td></tr><tr><td>m\u2220\u03B1</td><td class=\"m-a\"td>%m-a$</td></tr><tr><td>b \u2194</td><td class=\"l-b\"td>%l-b$</td></tr><tr><td>m\u2220\u03B2</td><td class=\"m-b\"td>%m-b$</td></tr><tr><td>h \u2194</td><td class=\"l-h\"td>%l-h$</td></tr><tr><td>r \u21BB</td><td class=\"t-m\"td>%t-m$</td></tr>".replace("%l-a$",b).replace("%m-a$",c).replace("%l-b$",d).replace("%m-b$",e).replace("%l-h$",f).replace("%t-m$",g);a(this.event.currentTarget).find(".info table").html(h)}prepareDebugElements(){if(!a(document).data("mouse-position-debug")){a(document).data("mouse-position-debug",!0);var b=a(this.event.currentTarget).css("position");a("head").prepend(a("<style>.mouse-position-debug{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.center{background-color:black}.center .leg-a, .center .leg-b, .center .hypotenuse{background-color:black}.center{position:relative;width:1px;height:1px}.center .leg-a, .center .leg-b, .center .hypotenuse{position:absolute}.center .leg-a{height:1px}.center .leg-b, .center .hypotenuse{width:1px}.center.II .leg-b, .center.II .hypotenuse{bottom:1px}.center.II-I .leg-b, .center.II-I .hypotenuse{bottom:1px}.center.I .leg-b, .center.I .hypotenuse{bottom:1px}.center.III .leg-b{top:1px}.center.III .hypotenuse{bottom:0;left:-1px}.center.III-IV .leg-b{top:1px}.center.III-IV .hypotenuse{bottom:0;left:-1px}.center.IV .leg-b{top:1px}.center.IV .hypotenuse{bottom:0;left:-1px}.center.II .leg-a{right:1px}.center.II-III .leg-a{right:1px}.center.III .leg-a{right:1px}.center.I .leg-a{left:1px}.center.I .leg-b{right:0}.center.I-IV .leg-a{left:1px}.center.I-IV .leg-b{right:0}.center.IV .leg-a{left:1px}.center.IV .leg-b{right:0}.center.II-III .leg-b{display:none}.center.I-IV .leg-b{display:none}.center.II-III .hypotenuse{display:none}.center.I-IV .hypotenuse{display:none}.center.II-I .hypotenuse{display:none}.center.III-IV .hypotenuse{display:none}.center.I .hypotenuse, .center.III .hypotenuse{transform-origin:bottom left}.center.II .hypotenuse, .center.IV .hypotenuse{transform-origin:bottom right}.center.III .hypotenuse{left:1px}.info{position:absolute;top:10px;left:10px}.info table tr td{color:rgba(0, 0, 0, 0.3)}.info table tr td:last-child{color:rgba(0, 0, 0, 0.4)}</style>"))}a(this.event.currentTarget).data("debug")||(a(this.event.currentTarget).data("debug",!0),!["absolute","fixed","relative","sticky"].includes(b)&&a(this.event.currentTarget).css("position","relative"),a(this.event.currentTarget).append("<div class=\"mouse-position-debug\"><div class=\"info\"><table></table></div><div class=\"center\"><div class=\"leg-a\"><div class=\"leg-b\"></div></div><div class=\"hypotenuse\"></div></div></div>"))}getData(){return{...{distance:this.triangleData.hypotenuse,quadrant:this.quadrant,degrees:this.getTotalDegrees()},...(0==this.settings.debug?{}:{debug:this.triangleData})}}}})(jQuery);